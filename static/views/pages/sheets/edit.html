<link rel="stylesheet" type="text/css" href="../../../../static/css/sheets.css">

<div class="inner-content">
    <div class="info-holder scrollable col-xs-12 col-sm-10 col-xs-offset-0 col-sm-offset-1">
        <div class="row sheet-edit-header">
            <div class="col-xs-12">
                <b class="page-header" ng-if="sheet_mode == 'edit'">Edit Sheet</b>
                <b class="page-header" ng-if="sheet_mode == 'create'">Create Sheet</b>
            </div>
        </div>

        <div class="row sheet-edit-holder">
            <div class="col-xs-6 sheet-area">

            </div>

            <div class="col-xs-6">
                <input ng-model="sheet.name" type="text" class="form-control" placeholder="Sheet Name">
                <ul class="list-inline">
                    <li uib-dropdown>
                        <a class="btn btn-default" uib-dropdown-toggle><span class="glyphicon glyphicon-plus"></span> Add Field</a>
                        <ul uib-dropdown-menu>
                            <li ng-repeat="(type, field) in default_fields">
                                <a ng-click="addField(type, field)">{{ type }}</a>
                            </li>
                        </ul>
                    </li>
                    <li style="float: right">
                        <a class="btn btn-success" ng-click="saveSheet()">Save</a>
                    </li>
                    <li style="float: right">
                        <a class="btn btn-danger" ng-click="cancelSheet()">Cancel</a>
                    </li>
                    <li style="float: right" ng-if="sheet_mode == 'edit'">
                        <a class="btn btn-warning" ng-click="revertSheet()">Revert</a>
                    </li>
                </ul>
                <div class="field-area">
                    <table class="table">
                        <tbody ui-sortable ng-model="sheet.data">
                            <tr ng-repeat="field in sheet.data">
                                <td style="border:none">
                                    <div class="field-section row">
                                        <div class="col-xs-10" style="text-overflow: ellipsis">
                                            <h1>{{field.name}}</h1>
                                        </div>
                                        <div class="col-xs-2" style="text-align: right">
                                            <a class="btn btn-default" ng-click="editField(field)">
                                                <span class="glyphicon glyphicon-cog"></span>
                                            </a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="field-edit-popup" ng-class="{'hidden': selected_field === undefined}">
    <div class="field-edit-holder col-xs-12 col-xs-offset-0 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
        <h1>Edit {{selected_field.type}}</h1>
        <div class="form-group row">
            <label class="col-xs-4 col-form-label" for="{{selected_field.key}}_name">Name:</label>
            <div class="col-xs-8">
                <input ng-class="{'form-control': option.type != 'checkbox'}" type="{{ option.type }}" id="{{selected_field.key}}_name" ng-model="selected_field['name']" required>
            </div>
        </div>
        <div class="form-group row" ng-repeat="option in default_fields[selected_field.type]">
            <label class="col-xs-4 col-form-label" for="{{selected_field.key}}_{{option.id}}">{{option.label}}:</label>
            <div class="col-xs-8">
                <input ng-class="{'form-control': option.type != 'checkbox'}" type="{{ option.type }}" id="{{selected_field.key}}_{{option.id}}" ng-model="selected_field[option.id]">
            </div>
        </div>
        <div style="text-align: right">
            <button class="btn btn-primary" ng-click="cancelEditField()">Cancel</button>
            <button class="btn btn-primary" ng-click="saveEditField()">Save</button>
        </div>
    </div>
</div>